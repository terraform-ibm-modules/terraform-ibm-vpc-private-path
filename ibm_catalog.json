{
  "products": [
    {
      "name": "deploy-arch-ibm-is-private-path-service-gateway",
      "label": "Cloud automation for VPC Private Path",
      "product_kind": "solution",
      "tags": [
        "ibm_created",
        "target_terraform",
        "terraform",
        "solution",
        "network",
        "platform_engineering"
      ],
      "keywords": [
        "vpc",
        "private path",
        "private",
        "nlb",
        "IaC",
        "infrastructure as code",
        "terraform",
        "solution"
      ],
      "short_description": "Deploy a VPC Private Path on IBM Cloud, enabling secure, high-performance private connectivity between IBM Cloud services.",
      "long_description": "The Cloud automation for VPC Private Path provisions a [VPC Private Path service](https://cloud.ibm.com/docs/vpc?topic=vpc-private-path-service-intro) on IBM Cloud, which enables private, secure, and high-throughput network connectivity between your Virtual Private Cloud (VPC) and supported IBM Cloud services—without traversing the public internet. This service is ideal for use cases that demand enhanced security, low latency, and predictable network performance.  \n\nLeverage [Terraform IBM Modules](https://github.com/terraform-ibm-modules) to shape and scale your solutions. You can integrate Terraform IBM Modules (TIM) to extend functionality and design a solution tailored to your environment and operations needs. These modules offer reusable, customizable elements that follow IBM Cloud's recommended practices. You can access the [source code and documentation](https://github.com/terraform-ibm-modules/terraform-ibm-vpc-private-path) and use it to extend your current architecture or create new solutions.\n\nℹ️ This Terraform-based automation is part of a broader suite of IBM-maintained Infrastructure as Code (IaC) assets, each following the naming pattern \"Cloud automation for *servicename*\" and focusing on single IBM Cloud service. These single-service deployable architectures can be used on their own to streamline and automate service deployments through an [IaC approach](https://cloud.ibm.com/docs/secure-enterprise?topic=secure-enterprise-understanding-projects), or assembled together into a broader [automated IaC stack](https://cloud.ibm.com/docs/secure-enterprise?topic=secure-enterprise-config-stack) to automate the deployment of an end-to-end solution architecture.",
      "offering_docs_url": "https://cloud.ibm.com/docs/ibm-cloud-provider-for-terraform?topic=ibm-cloud-provider-for-terraform-about-tim",
      "offering_icon_url": "https://raw.githubusercontent.com/terraform-ibm-modules/terraform-ibm-vpc-private-path/main/images/private_path.svg",
      "provider_name": "IBM",
      "features": [
        {
          "title": "Private Path Service",
          "description": "Provision a [VPC Private Path service](https://cloud.ibm.com/docs/vpc?topic=vpc-private-path-service-intro) to establish secure, private, and high-performance network connectivity between your VPC and supported IBM Cloud services—bypassing the public internet."
        },
        {
          "title": "Private Network Load Balancer",
          "description": "Set up a [Private Network Load Balancer](https://cloud.ibm.com/docs/vpc?topic=vpc-load-balancers#private-path-nlb) that directs traffic securely over the Private Path. It includes a backend pool and is integrated with a Virtual Private Endpoint (VPE) gateway to connect to supported IBM services privately."
        },
        {
          "title": "Composable and Extensible Architecture",
          "description": "This architecture illustrates how Terraform IBM Modules(TIM) can be integrated to deliver a complete solution on IBM Cloud. Each module is a reusable, and validated component for security, compliance, and operational IBM best practices. You can deploy this architecture as-is or configure it as code by leveraging the underlying modules to fit your specific requirements. Explore the [source code and documentation](https://github.com/terraform-ibm-modules/terraform-ibm-vpc-private-path) to adapt, extend, or create entirely new solutions using these building blocks."
        }
      ],
      "support_details": "This product is in the community registry, support is handled through the [original repo](https://github.com/terraform-ibm-modules/terraform-ibm-vpc-private-path). If you experience issues, please open an issue in the repository [here](https://github.com/terraform-ibm-modules/terraform-ibm-vpc-private-path/issues). Please note this product is not supported via the IBM Cloud Support Center.",
      "flavors": [
        {
          "label": "Fully Configurable",
          "name": "fully-configurable",
          "index": 1,
          "install_type": "fullstack",
          "working_directory": "solutions/fully-configurable",
          "release_notes_url": "https://github.com/terraform-ibm-modules/terraform-ibm-vpc-private-path/releases",
          "short_description": "Ideal for users who want flexibility with a reliable starting point.",
          "iam_permissions": [
            {
              "role_crns": [
                "crn:v1:bluemix:public:iam::::role:Administrator"
              ],
              "service_name": "iam-identity",
              "notes": "[Optional] Required if Cloud automation for account configuration is enabled."
            },
            {
              "role_crns": [
                "crn:v1:bluemix:public:iam::::role:Administrator"
              ],
              "service_name": "is.vpc",
              "notes": "[Optional] Required if Cloud automation for Virtual Private Cloud(VPC) is enabled."
            },
            {
              "role_crns": [
                "crn:v1:bluemix:public:iam::::role:Editor"
              ],
              "service_name": "is.vpc",
              "notes": "Required for creating Private-path service."
            },
            {
              "role_crns": [
                "crn:v1:bluemix:public:iam::::role:Viewer"
              ],
              "service_name": "Resource group only",
              "notes": "Viewer access is required in the resource group you want to provision in."
            }
          ],
          "architecture": {
            "features": [
              {
                "title": " ",
                "description": "Configured to use IBM secure by default standards, but can be edited to fit your use case."
              }
            ],
            "diagrams": [
              {
                "diagram": {
                  "caption": "VPC Private Path topology",
                  "url": "https://raw.githubusercontent.com/terraform-ibm-modules/terraform-ibm-vpc-private-path/main/reference-architectures/deployable-architecture-private-path.svg",
                  "type": "image/svg+xml"
                },
                "description": "This solution provisions a <b>Private Path</b> service on IBM Cloud, enabling secure, private connectivity between resources within a Virtual Private Cloud (VPC) and IBM Cloud services or on-premises networks. The Private Path service facilitates encrypted, low-latency communication by bypassing the public internet, ensuring data confidentiality and integrity.<br><br>As part of the deployment, a <b>Private Network Load Balancer (NLB)</b> is created and configured with a backend pool, enabling internal traffic distribution across compute resources. This enhances both scalability and high availability for applications hosted within your VPC.<br><br>You can optionally create a new <b>VPC</b> as part of this solution by including the <a href=\"https://cloud.ibm.com/catalog/7a4d68b4-cf8b-40cd-a3d1-f49aff526eb3/architecture/deploy-arch-ibm-vpc-2af61763-f8ef-4527-a815-b92166f29bc8-global\">Cloud automation for VPC</a> dependency, or you may bring your own existing VPC. The VPC can be provisioned in either a single-zone or multi-zone configuration depending on your high availability needs. By default, a three-zone VPC topology is deployed to enhance resilience."
              }
            ]
          },
          "configuration": [
            {
              "key": "ibmcloud_api_key"
            },
            {
              "key": "prefix",
              "required": true,
              "default_value": "dev",
              "random_string": {
                "length": 4
              },
              "value_constraints": [
                {
                  "type": "regex",
                  "description": "Prefix must begin with a lowercase letter and may contain only lowercase letters, digits, and hyphens '-'. It must not end with a hyphen('-'), and cannot contain consecutive hyphens ('--'). It should not exceed 16 characters.",
                  "value": "^$|^__NULL__$|^[a-z](?!.*--)(?:[a-z0-9-]{0,14}[a-z0-9])?$"
                }
              ]
            },
            {
              "key": "region",
              "required": true,
              "type": "string",
              "custom_config": {
                "config_constraints": {
                  "generationType": "2"
                },
                "grouping": "deployment",
                "original_grouping": "deployment",
                "type": "vpc_region"
              },
              "description": "Region in which all the resources will be deployed. [Learn More](https://terraform-ibm-modules.github.io/documentation/#/region).",
              "virtual": true,
              "default_value": "us-south"
            },
            {
              "key": "existing_resource_group_name",
              "display_name": "resource_group",
              "custom_config": {
                "type": "resource_group",
                "grouping": "deployment",
                "original_grouping": "deployment",
                "config_constraints": {
                  "identifier": "rg_name"
                }
              }
            },
            {
              "key": "existing_vpc_crn",
              "required": true,
              "value_constraints": [
                {
                  "type": "regex",
                  "description": "The value provided for 'existing_vpc_crn' is not valid.",
                  "value": "^crn:v\\d:(.*:){2}is:(.*:)([aos]\\/[\\w_\\-]+)::vpc:[0-9a-z]{4}-[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$"
                }
              ],
              "custom_config": {
                "type": "platform_resource",
                "grouping": "deployment",
                "original_grouping": "deployment",
                "config_constraints": {
                  "resourceType": "vpc",
                  "selection": "single_select",
                  "valueType": "crn"
                }
              }
            },
            {
              "key": "existing_subnet_id",
              "custom_config": {
                "type": "platform_resource",
                "grouping": "deployment",
                "original_grouping": "deployment",
                "config_constraints": {
                  "resourceType": "subnet",
                  "selection": "single_select",
                  "valueType": "id"
                },
                "associations": {
                  "parameters": [
                    {
                      "name": "region",
                      "optionsRefresh": true
                    }
                  ]
                }
              }
            },
            {
              "key": "private_path_service_endpoints",
              "required": true,
              "custom_config": {
                "grouping": "deployment",
                "original_grouping": "deployment",
                "config_constraints": {
                  "type": "string"
                }
              }
            },
            {
              "key": "private_path_tags",
              "custom_config": {
                "type": "array",
                "grouping": "deployment",
                "original_grouping": "deployment",
                "config_constraints": {
                  "type": "string"
                }
              }
            },
            {
              "key": "private_path_access_tags",
              "custom_config": {
                "type": "array",
                "grouping": "deployment",
                "original_grouping": "deployment",
                "config_constraints": {
                  "type": "string"
                }
              }
            },
            {
              "key": "private_path_name"
            },
            {
              "key": "private_path_default_access_policy",
              "options": [
                {
                  "displayname": "Review",
                  "value": "review"
                },
                {
                  "displayname": "Permit",
                  "value": "permit"
                },
                {
                  "displayname": "Deny",
                  "value": "deny"
                }
              ]
            },
            {
              "key": "private_path_publish"
            },
            {
              "key": "private_path_zonal_affinity"
            },
            {
              "key": "private_path_account_policies",
              "custom_config": {
                "type": "code_editor",
                "grouping": "deployment",
                "original_grouping": "deployment",
                "config_constraints": {
                  "supportedLanguages": [
                    "hcl"
                  ]
                }
              }
            },
            {
              "key": "network_loadbalancer_name"
            },
            {
              "key": "network_loadbalancer_backend_pools",
              "custom_config": {
                "type": "code_editor",
                "grouping": "deployment",
                "original_grouping": "deployment",
                "config_constraints": {
                  "supportedLanguages": [
                    "hcl"
                  ]
                }
              }
            },
            {
              "key": "provider_visibility",
              "hidden": true,
              "options": [
                {
                  "displayname": "private",
                  "value": "private"
                },
                {
                  "displayname": "public",
                  "value": "public"
                },
                {
                  "displayname": "public-and-private",
                  "value": "public-and-private"
                }
              ]
            },
            {
              "key": "subnets",
              "default_value": "{\n    zone-1 = [\n      {\n        name           = \"subnet-a\"\n        cidr           = \"10.10.10.0/24\"\n        public_gateway = true\n        acl_name       = \"vpc-acl\"\n        no_addr_prefix = false\n      }\n    ],\n    zone-2 = [\n      {\n        name           = \"subnet-b\"\n        cidr           = \"10.20.10.0/24\"\n        public_gateway = true\n        acl_name       = \"vpc-acl\"\n        no_addr_prefix = false\n      }\n    ],\n    zone-3 = [\n      {\n        name           = \"subnet-c\"\n        cidr           = \"10.30.10.0/24\"\n        public_gateway = true\n        acl_name       = \"vpc-acl\"\n        no_addr_prefix = false\n      }\n    ]\n  }",
              "description": "List of subnets for the vpc. For each item in each array, a subnet will be created. Items can be either CIDR blocks or total ipv4 addresses. Public gateways will be enabled only in zones where a gateway has been created. [Learn more](https://github.com/terraform-ibm-modules/terraform-ibm-landing-zone-vpc/blob/main/solutions/fully-configurable/DA-types.md#subnets-).",
              "required": false,
              "virtual": true,
              "hidden": true,
              "custom_config": {
                "grouping": "deployment",
                "original_grouping": "deployment",
                "type": "code_editor",
                "config_constraints": {
                  "supportedLanguages": [
                    "hcl"
                  ]
                }
              }
            },
            {
              "key": "network_acls",
              "type": "list(object)",
              "default_value": "[\n  { name                         = \"vpc-acl\"\n    add_ibm_cloud_internal_rules = true\n    add_vpc_connectivity_rules   = true\n    prepend_ibm_rules            = true\n    rules = [\n      {\n        name      = \"allow-443-inbound-source\"\n        action    = \"allow\"\n        direction = \"inbound\"\n        tcp = {\n          source_port_min = 443\n          source_port_max = 443\n        }\n        destination = \"0.0.0.0/0\"\n        source      = \"0.0.0.0/0\"\n      },\n      {\n        name      = \"allow-443-inbound-dest\"\n        action    = \"allow\"\n        direction = \"inbound\"\n        tcp = {\n          port_max = 443\n          port_min = 443\n        }\n        destination = \"0.0.0.0/0\"\n        source      = \"0.0.0.0/0\"\n      },\n      {\n        name      = \"allow-all-80-inbound\"\n        action    = \"allow\"\n        direction = \"inbound\"\n        tcp = {\n          source_port_min = 80\n          source_port_max = 80\n        }\n        destination = \"0.0.0.0/0\"\n        source      = \"0.0.0.0/0\"\n      },\n      {\n        name      = \"allow-all-ingress-inbound\"\n        action    = \"allow\"\n        direction = \"inbound\"\n        tcp = {\n          source_port_min = 30000\n          source_port_max = 32767\n        }\n        destination = \"0.0.0.0/0\"\n        source      = \"0.0.0.0/0\"\n      },\n      {\n        name      = \"allow-443-outbound-source\"\n        action    = \"allow\"\n        direction = \"outbound\"\n        tcp = {\n          source_port_min = 443\n          source_port_max = 443\n        }\n        destination = \"0.0.0.0/0\"\n        source      = \"0.0.0.0/0\"\n      },\n      {\n        name      = \"allow-443-outbound-dest\"\n        action    = \"allow\"\n        direction = \"outbound\"\n        tcp = {\n          port_min = 443\n          port_max = 443\n        }\n        destination = \"0.0.0.0/0\"\n        source      = \"0.0.0.0/0\"\n      },\n      {\n        name      = \"allow-all-80-outbound\"\n        action    = \"allow\"\n        direction = \"outbound\"\n        tcp = {\n          port_min = 80\n          port_max = 80\n        }\n        destination = \"0.0.0.0/0\"\n        source      = \"0.0.0.0/0\"\n      },\n      {\n        name      = \"allow-all-ingress-outbound\"\n        action    = \"allow\"\n        direction = \"outbound\"\n        tcp = {\n          port_min = 30000\n          port_max = 32767\n        }\n        destination = \"0.0.0.0/0\"\n        source      = \"0.0.0.0/0\"\n      }\n    ]\n  }\n]",
              "description": "The list of ACLs to create. Provide at least one rule for each ACL. [Learn more](https://github.com/terraform-ibm-modules/terraform-ibm-landing-zone-vpc/blob/main/solutions/fully-configurable/DA-types.md#network-acls-).",
              "required": false,
              "virtual": true,
              "hidden": true,
              "custom_config": {
                "type": "code_editor",
                "grouping": "deployment",
                "original_grouping": "deployment",
                "config_constraints": {
                  "supportedLanguages": [
                    "hcl"
                  ]
                }
              }
            }
          ],
          "dependencies": [
            {
              "name": "deploy-arch-ibm-slz-vpc",
              "description": "Configure the VPC and subnets required to deploy VPC private path.",
              "id": "9fc0fa64-27af-4fed-9dce-47b3640ba739-global",
              "version": "v8.12.1",
              "flavors": [
                "fully-configurable"
              ],
              "catalog_id": "1082e7d2-5e2f-0a11-a3bc-f88a8e1931fc",
              "optional": true,
              "on_by_default": false,
              "input_mapping": [
                {
                  "dependency_input": "prefix",
                  "version_input": "prefix",
                  "reference_version": true
                },
                {
                  "dependency_input": "existing_resource_group_name",
                  "version_input": "existing_resource_group_name",
                  "reference_version": true
                },
                {
                  "dependency_input": "region",
                  "version_input": "region",
                  "reference_version": true
                },
                {
                  "dependency_output": "private_path_subnet_id",
                  "version_input": "existing_subnet_id"
                },
                {
                  "dependency_output": "vpc_crn",
                  "version_input": "existing_vpc_crn"
                },
                {
                  "dependency_input": "subnets",
                  "version_input": "subnets",
                  "reference_version": true
                },
                {
                  "dependency_input": "network_acls",
                  "version_input": "network_acls",
                  "reference_version": true
                }
              ]
            }
          ],
          "dependency_version_2": true,
          "terraform_version": "1.12.2",
          "ignore_readme": true
        }
      ]
    }
  ]
}
